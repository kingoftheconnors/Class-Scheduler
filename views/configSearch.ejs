<%- include('includes/header.ejs') %>

    <div class="jumbotron jumbotron-fluid bg-primary text-light">
        <div class="container text-center">
            <h1 class="display-2">Moc Meetup</h1>
            <p>Find the class-free times for your target audience!</p>
        </div>
    </div>
    <div class="container">
        <% if ( error.length > 0 ) { %>
            <p class="py-3 text-center text-danger"><%= error %> </p>
        <% } %>
        <% if ( message.length > 0 ) { %>
            <p class="py-3 text-center text-success"><%= message %> </p>
        <% } %>
        <div class="row">
            <div class="col-8">
                <div id="tableauViz"></div>
                <script src="https://public.tableau.com/javascripts/api/tableau-2.js"></script>
                <script>
                    var viz;
                    function initViz() {
                        var containerDiv = document.getElementById("tableauViz"),
                        url = "https://public.tableau.com/views/UTCClassesHeatmap/UTCClasses";
                        viz = new tableau.Viz(containerDiv, url, {width: "100%", height: "650px", hideTabs: true, hideToolbar: true});
                    }
                    initViz();
                </script>
            </div>
            <div class="col-4">
                <!-- Presets box -->
                <div class="row justify-content-center">
                    <div class="col">
                        <select class="form-control" id="viewPreset">
                            <option selected="">Use a Preset of classes...</option>
                            <% for(let presetName of Object.keys(presets)){ %>
                                <option value="<%= presetName %>" data-classlist="<%= presets[presetName].join('|') %>"><%= presetName %></option>
                            <% } %>
                        </select>
                    </div>
                </div>
                <!-- On submit use an ajax call to get all classes from the preset chosen, which the user can then dynamically add to-->
                <div class="row py-3 justify-content-center">
                    <div class="col">
                        <input id="classBrowser" list="classroomList" class="form-control" placeholder="Enter a class name" maxlength="100" />
                        <datalist id="classroomList">
                            <% for(let className of classes){ %>
                                <option value="<%= className %>"><%= className %></option>
                            <% } %>
                        </datalist>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class="row justify-content-around py-4 border-bottom border-primary">
            <p class="text-center">
                <b>
                    Moc-Meetup is the scheduling tool for tutors, club leaders, and event
                    organizers! We can help you know when your audience isn't in class,
                    what classrooms are free, and what the statistically best times for your
                    event are! Enter courses in the table above, and we'll organize them
                    into a  weekly calendar to help you find the most usable times for your scheduling!
                </b>
            </p>
        </div>
    </div>

<%- include('includes/footer.ejs') %>

<script type="text/javascript" src="/javascripts/classSearch.js"></script>
